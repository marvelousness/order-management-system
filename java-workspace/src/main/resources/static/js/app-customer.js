(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{126:function(e,t,r){"use strict";var a=r(33);r.n(a).a},127:function(e,t,r){"use strict";var a=r(34);r.n(a).a},33:function(e,t,r){},34:function(e,t,r){},93:function(e,t,r){"use strict";function a(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"customer-editor"},[t.loading?r("Spin",{attrs:{fix:""}},[t._v("加载中...")]):t._e(),t._v(" "),r("Form",{attrs:{model:t.form,"label-width":120}},[r("FormItem",{attrs:{label:"名称："}},[r("Input",{attrs:{placeholder:"请输入客户名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("FormItem",{attrs:{label:"昵称："}},[r("Input",{attrs:{placeholder:"请输入客户昵称"},model:{value:t.form.nick,callback:function(e){t.$set(t.form,"nick",e)},expression:"form.nick"}})],1),t._v(" "),r("FormItem",{attrs:{label:"旺旺："}},[r("Input",{attrs:{placeholder:"请输入客户的旺旺号"},model:{value:t.form.wangwang,callback:function(e){t.$set(t.form,"wangwang",e)},expression:"form.wangwang"}})],1),t._v(" "),r("FormItem",{attrs:{label:"QQ："}},[r("Input",{attrs:{placeholder:"请输入客户的QQ号"},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),t._v(" "),r("FormItem",{attrs:{label:"微信："}},[r("Input",{attrs:{placeholder:"客户的微信号"},model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1),t._v(" "),r("FormItem",{attrs:{label:"手机："}},[r("Input",{attrs:{placeholder:"客户的手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{label:"地域："}},[r("Select",{attrs:{filterable:""},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.area.data,function(e){return r("OptionGroup",{key:e.id,attrs:{label:e.name}},t._l(e.children,function(e){return r("Option",{key:e.id,attrs:{value:e.name}},[t._v(t._s(e.name))])}),1)}),1)],1),t._v(" "),r("FormItem",{attrs:{label:"备注内容："}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注内容"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",size:"large",loading:t.padding},on:{click:t.submit}},[t._v("保存")])],1)],1)],1)}a._withStripped=!0;var n=r(6),o=r.n(n),i=r(5),l=r.n(i),s={data:function(){return{form:{name:"",nick:"",wangwang:"",qq:"",wechat:"",phone:"",region:"",remark:""},area:{data:[]},padding:!1,loading:!1}},computed:{id:{get:function(){return this.$route.params.id}}},mounted:function(){this.load()},methods:{load:function(){var e=this;if(!this.loading){var r=this,t=[new l.a(function(t){API.getAreaTree().then(function(e){r.area.data=e&&e.data instanceof Array?e.data:[],t(!0)}).catch(function(e){r.$error(e),t(!1)})}),new l.a(function(t){r.id?API.getCustomer({id:r.id}).then(function(e){r.form=e&&e.data?e.data:{},t(!0)}).catch(function(e){r.$error(e),t(!1)}):t(!1)})];this.loading=!0,l.a.all(t).then(function(){return e.loading=!1})}},submit:function(){var t=this,e=JSON.parse(o()(this.form)),r=!1;for(var a in e)if(e[a]){r=!0;break}r?(this.padding=!0,API.postCustomerSave(this.form).then(function(e){e&&0<e.data&&t.$Message.success("保存客户信息成功！"),t.$router.push({name:"CustomerList"}),t.padding=!1}).catch(function(e){return t.$error(e,t.padding=!1)})):this.$Message.error("最少录入一条信息")}}},c=(r(126),r(0)),u=Object(c.a)(s,a,[],!1,null,"102c6a32",null);u.options.__file="src/views/customer/CustomerEditor.vue";t.a=u.exports},94:function(e,t,r){"use strict";function a(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"tool-bar"},[r("Button",{attrs:{icon:"md-cloud-download"},on:{click:function(e){t.exporter.visible=!0}}},[t._v("导出")]),t._v(" "),r("div",{staticClass:"tool-searcher"},[r("Input",{attrs:{search:"","enter-button":"搜索",placeholder:"请输入客户的名称、昵称、微信、电话等信息进行检索"},on:{"on-search":function(e){return t.load(1)}},model:{value:t.searcher.word,callback:function(e){t.$set(t.searcher,"word",e)},expression:"searcher.word"}})],1)],1),t._v(" "),r("Table",{ref:"table",attrs:{border:"","context-menu":"","show-context-menu":"",columns:t.table.columns,data:t.table.data,loading:t.loading},on:{"on-contextmenu":function(e){return t.table.crow=e}}},[r("template",{slot:"footer"},[r("Page",{attrs:{total:t.pager.total,"page-size":t.pager.size,current:t.pager.current,size:"small","show-total":"","show-sizer":""},on:{"on-change":t.handleTablePageChange,"on-page-size-change":t.handleTablePageSizeChange}})],1),t._v(" "),r("template",{slot:"contextMenu"},[r("DropdownItem",{nativeOn:{click:function(e){return t.handleContextMenuCreateNewOrder(e)}}},[t._v("新建订单")]),t._v(" "),r("DropdownItem",{nativeOn:{click:function(e){return t.handleContextMenuEdit(e)}}},[t._v("编辑")]),t._v(" "),r("DropdownItem",{staticStyle:{color:"#ed4014"},nativeOn:{click:function(e){return t.handleContextMenuDelete(e)}}},[t._v("删除")])],1)],2),t._v(" "),r("Modal",{attrs:{title:"导出选项","class-name":"vertical-center-modal"},model:{value:t.exporter.visible,callback:function(e){t.$set(t.exporter,"visible",e)},expression:"exporter.visible"}},[r("RadioGroup",{model:{value:t.exporter.option,callback:function(e){t.$set(t.exporter,"option",e)},expression:"exporter.option"}},[r("Radio",{attrs:{label:"current"}},[t._v("当前页的列表")]),t._v(" "),r("Radio",{attrs:{label:"whole"}},[t._v("完整的列表")])],1),t._v(" "),r("div",{staticClass:"modal-footer",attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:t.handleExport}},[t._v("确认")])],1)],1)],1)}a._withStripped=!0;var n={data:function(){return{loading:!1,searcher:{word:""},table:{columns:[{width:70,type:"index",title:"序号",align:"center"},{width:120,title:"名称",key:"name",align:"center"},{width:120,title:"昵称",key:"nick",align:"center"},{width:140,title:"旺旺",key:"wangwang",align:"center"},{width:140,title:"QQ",key:"qq",align:"center"},{width:140,title:"微信",key:"wechat",align:"center"},{width:140,title:"电话",key:"phone",align:"center"},{width:80,title:"地区",key:"region",align:"center"},{width:170,title:"创建时间",key:"createTime",align:"center"},{width:80,title:"创建人",key:"creatorName",align:"center"},{width:120,title:"创建人部门",key:"creatorDepartmentName",align:"center"},{width:200,title:"备注",key:"remark"}],data:[],crow:{}},pager:{current:1,size:10,total:0},exporter:{visible:!1,option:"current"}}},mounted:function(){this.load(this.pager.current,this.pager.size)},methods:{load:function(e,t){var r=this;e=0<e?e:this.pager.number,t=0<t?t:this.pager.size;var a=this;a.loading=!0,API.getCustomerList({number:e,size:t,keyword:this.searcher.word}).then(function(e){var t=e&&e.data?e.data:{};a.pager.size=t.size,a.pager.total=t.total,a.pager.current=t.number,a.table.data=t.rows instanceof Array?t.rows:[],a.loading=!1}).catch(function(e){return r.$error(e,r.loading=!1)})},hanleTableRowEdit:function(e){this.$router.push({name:"CustomerEditor",params:{id:e.id}})},hanleTableRowDelete:function(){},handleTablePageChange:function(e){this.load(e,this.pager.size)},handleTablePageSizeChange:function(e){this.load(this.pager.current,e)},handleContextMenuEdit:function(){var e=this.table.crow;e&&e.id?this.$router.push({name:"CustomerEditor",params:{id:e.id}}):this.$Message.error("请选择需要操作的客户")},handleContextMenuDelete:function(){var e=this.table.crow;if(e&&e.id){var t=e&&e.name?e.name:"",r=e&&0<e.id?e.id:0;if(0<r){var a=this,n="确定删除"+(t?"【"+t+"】":"该")+"的客户信息",o=function(){setTimeout(function(){a.$Modal.remove();var e=a.pager.current;a.table.data.length<2&&1<e&&e--,a.load(e,a.pager.size)},500)};a.$Modal.confirm({loading:!0,title:n,onOk:function(){API.postCustomerDelete({id:r}).then(o).catch(function(e){return a.$error(e,o)})}})}}else this.$Message.error("请选择需要操作的客户")},handleContextMenuCreateNewOrder:function(){var e=this.table.crow;e&&e.id?this.$router.push({name:"OrderEditor",params:{customer:e.id}}):this.$Message.error("请选择需要操作的客户")},handleExport:function(){if("current"==this.exporter.option)return this.$refs.table.exportCsv({filename:(new Date).format("客户列表-yyyyMMddHHmmss-")+this.pager.current}),void(this.exporter.visible=!1);this.$Message.info("客户数据导出功能暂未开放!")}}},o=(r(127),r(0)),i=Object(o.a)(n,a,[],!1,null,"dbe57fba",null);i.options.__file="src/views/customer/CustomerList.vue";t.a=i.exports}}]);