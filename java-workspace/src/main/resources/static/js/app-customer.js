(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{124:function(e,t,n){"use strict";var a=n(33);n.n(a).a},33:function(e,t,n){},91:function(e,t,n){"use strict";function a(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"customer-editor"},[t.loading?n("Spin",{attrs:{fix:""}},[t._v("加载中...")]):t._e(),t._v(" "),n("Form",{attrs:{model:t.form,"label-width":120}},[n("FormItem",{attrs:{label:"名称："}},[n("Input",{attrs:{placeholder:"请输入客户名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"昵称："}},[n("Input",{attrs:{placeholder:"请输入客户昵称"},model:{value:t.form.nick,callback:function(e){t.$set(t.form,"nick",e)},expression:"form.nick"}})],1),t._v(" "),n("FormItem",{attrs:{label:"旺旺："}},[n("Input",{attrs:{placeholder:"请输入客户的旺旺号"},model:{value:t.form.wangwang,callback:function(e){t.$set(t.form,"wangwang",e)},expression:"form.wangwang"}})],1),t._v(" "),n("FormItem",{attrs:{label:"QQ："}},[n("Input",{attrs:{placeholder:"请输入客户的QQ号"},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),t._v(" "),n("FormItem",{attrs:{label:"微信："}},[n("Input",{attrs:{placeholder:"客户的微信号"},model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1),t._v(" "),n("FormItem",{attrs:{label:"手机："}},[n("Input",{attrs:{placeholder:"客户的手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),n("FormItem",{attrs:{label:"地域："}},[n("Select",{attrs:{filterable:""},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.area.data,function(e){return n("OptionGroup",{key:e.id,attrs:{label:e.name}},t._l(e.children,function(e){return n("Option",{key:e.id,attrs:{value:e.name}},[t._v(t._s(e.name))])}),1)}),1)],1),t._v(" "),n("FormItem",{attrs:{label:"备注内容："}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注内容"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary",size:"large",loading:t.padding},on:{click:t.submit}},[t._v("保存")])],1)],1)],1)}a._withStripped=!0;var r=n(6),o=n.n(r),i=n(5),l=n.n(i),s={data:function(){return{form:{name:"",nick:"",wangwang:"",qq:"",wechat:"",phone:"",region:"",remark:""},area:{data:[]},padding:!1,loading:!1}},computed:{id:{get:function(){return this.$route.params.id}}},mounted:function(){this.load()},methods:{load:function(){var e=this;if(!this.loading){var n=this,t=[new l.a(function(t){API.getAreaTree().then(function(e){n.area.data=e&&e.data instanceof Array?e.data:[],t(!0)}).catch(function(e){n.$error(e),t(!1)})}),new l.a(function(t){n.id?API.getCustomer({id:n.id}).then(function(e){n.form=e&&e.data?e.data:{},t(!0)}).catch(function(e){n.$error(e),t(!1)}):t(!1)})];this.loading=!0,l.a.all(t).then(function(){return e.loading=!1})}},submit:function(){var t=this,e=JSON.parse(o()(this.form)),n=!1;for(var a in e)if(e[a]){n=!0;break}n?(this.padding=!0,API.postCustomerSave(this.form).then(function(e){e&&0<e.data&&t.$Message.success("保存客户信息成功！"),t.$router.push({name:"CustomerList"}),t.padding=!1}).catch(function(e){return t.$error(e,t.padding=!1)})):this.$Message.error("最少录入一条信息")}}},c=(n(124),n(0)),u=Object(c.a)(s,a,[],!1,null,"102c6a32",null);u.options.__file="src/views/customer/CustomerEditor.vue";t.a=u.exports},92:function(e,t,n){"use strict";function a(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ButtonGroup",[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleInsert}},[t._v("新增")])],1),t._v(" "),n("Table",{attrs:{border:"","context-menu":"","show-context-menu":"",columns:t.table.columns,data:t.table.data,loading:t.loading},on:{"on-contextmenu":function(e){return t.table.crow=e}}},[n("template",{slot:"footer"},[n("Page",{attrs:{total:t.pager.total,"page-size":t.pager.size,current:t.pager.current,size:"small","show-total":"","show-sizer":""},on:{"on-change":t.handleTablePageChange,"on-page-size-change":t.handleTablePageSizeChange}})],1),t._v(" "),n("template",{slot:"contextMenu"},[n("DropdownItem",{nativeOn:{click:function(e){return t.handleContextMenuCreateNewOrder(e)}}},[t._v("新建订单")]),t._v(" "),n("DropdownItem",{nativeOn:{click:function(e){return t.handleContextMenuEdit(e)}}},[t._v("编辑")]),t._v(" "),n("DropdownItem",{staticStyle:{color:"#ed4014"},nativeOn:{click:function(e){return t.handleContextMenuDelete(e)}}},[t._v("删除")])],1)],2)],1)}a._withStripped=!0;var r={data:function(){return{loading:!1,table:{columns:[{width:70,type:"index",title:"序号",align:"center"},{width:120,title:"名称",key:"name",align:"center"},{width:120,title:"昵称",key:"nick",align:"center"},{width:120,title:"旺旺",key:"wangwang",align:"center"},{width:120,title:"QQ",key:"qq",align:"center"},{width:120,title:"微信",key:"wechat",align:"center"},{width:120,title:"电话",key:"phone",align:"center"},{width:80,title:"地区",key:"region",align:"center"},{width:80,title:"创建人",key:"creatorName",align:"center"},{width:120,title:"创建人部门",key:"creatorDepartmentName",align:"center"},{width:120,title:"备注",key:"remark"}],data:[],crow:{}},pager:{current:1,size:10,total:0}}},mounted:function(){this.load(this.pager.current,this.pager.size)},methods:{load:function(e,t){var n=this;if(!this.loading){var a=this;a.loading=!0,API.getCustomerList({number:e,size:t}).then(function(e){var t=e&&e.data?e.data:{};a.pager.size=t.size,a.pager.total=t.total,a.pager.current=t.number,a.table.data=t.rows instanceof Array?t.rows:[],a.loading=!1}).catch(function(e){return n.$error(e,n.loading=!1)})}},handleInsert:function(){this.$router.push({name:"CustomerEditor"})},hanleTableRowEdit:function(e){this.$router.push({name:"CustomerEditor",params:{id:e.id}})},hanleTableRowDelete:function(){},handleTablePageChange:function(e){this.load(e,this.pager.size)},handleTablePageSizeChange:function(e){this.load(this.pager.current,e)},handleContextMenuEdit:function(){var e=this.table.crow;e&&e.id?this.$router.push({name:"CustomerEditor",params:{id:e.id}}):this.$Message.error("请选择需要操作的客户")},handleContextMenuDelete:function(){var e=this.table.crow;if(e&&e.id){var t=e&&e.name?e.name:"",n=e&&0<e.id?e.id:0;if(0<n){var a=this,r="确定删除"+(t?"【"+t+"】":"该")+"的客户信息",o=function(){setTimeout(function(){a.$Modal.remove();var e=a.pager.current;a.table.data.length<2&&1<e&&e--,a.load(e,a.pager.size)},500)};a.$Modal.confirm({loading:!0,title:r,onOk:function(){API.postCustomerDelete({id:n}).then(o).catch(function(e){return a.$error(e,o)})}})}}else this.$Message.error("请选择需要操作的客户")},handleContextMenuCreateNewOrder:function(){var e=this.table.crow;e&&e.id?this.$router.push({name:"OrderEditor",params:{customer:e.id}}):this.$Message.error("请选择需要操作的客户")},handleExport:function(){}}},o=n(0),i=Object(o.a)(r,a,[],!1,null,"dbe57fba",null);i.options.__file="src/views/customer/CustomerList.vue";t.a=i.exports}}]);